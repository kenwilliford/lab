:root{--color-bg-primary: #1a1a1a;--color-bg-secondary: #242424;--color-bg-tertiary: #2d2d2d;--color-bg-elevated: #3a3a3a;--color-surface-dark: #0d0d0d;--color-surface-hover: #404040;--color-surface-active: #505050;--color-text-primary: #e6e6e6;--color-text-secondary: #a0a0a0;--color-text-muted: #666666;--color-text-disabled: #444444;--color-accent-primary: #ff764d;--color-accent-secondary: #5dade2;--color-accent-success: #58d68d;--color-accent-warning: #f4d03f;--color-accent-danger: #e74c3c;--color-border-subtle: #333333;--color-border-default: #404040;--color-border-strong: #555555;--color-knob-bg: #1e1e1e;--color-knob-ring: #444444;--color-knob-indicator: var(--color-accent-primary);--color-segment-1: #e74c3c;--color-segment-2: #3498db;--color-segment-3: #2ecc71;--color-segment-4: #f39c12;--color-segment-5: #9b59b6;--color-segment-6: #1abc9c;--space-xs: 4px;--space-sm: 8px;--space-md: 16px;--space-lg: 24px;--space-xl: 32px;--radius-sm: 4px;--radius-md: 6px;--radius-lg: 8px;--radius-full: 9999px;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .3);--shadow-md: 0 4px 6px rgba(0, 0, 0, .4);--shadow-lg: 0 8px 16px rgba(0, 0, 0, .5);--font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;--font-family-mono: "JetBrains Mono", "Fira Code", Consolas, monospace;--font-size-xs: 11px;--font-size-sm: 12px;--font-size-md: 14px;--font-size-lg: 16px;--font-size-xl: 20px;--font-size-2xl: 24px;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--line-height-tight: 1.2;--line-height-normal: 1.5;--transition-fast: .1s ease;--transition-normal: .2s ease;--transition-slow: .3s ease;--sidebar-width: 280px;--header-height: 48px;--panel-padding: var(--space-md)}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}body{font-family:var(--font-family);font-size:var(--font-size-md);font-weight:var(--font-weight-normal);line-height:var(--line-height-normal);color:var(--color-text-primary);background-color:var(--color-bg-primary);min-height:100vh;overflow:hidden}#root{width:100%;height:100vh;display:flex;flex-direction:column}h1,h2,h3,h4,h5,h6{font-weight:var(--font-weight-semibold);line-height:var(--line-height-tight);color:var(--color-text-primary)}h1{font-size:var(--font-size-2xl)}h2{font-size:var(--font-size-xl)}h3{font-size:var(--font-size-lg)}p{color:var(--color-text-secondary)}code,pre{font-family:var(--font-family-mono);font-size:var(--font-size-sm)}a{color:var(--color-accent-secondary);text-decoration:none;transition:color var(--transition-fast)}a:hover{color:var(--color-accent-primary)}button{font-family:inherit;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border-default);border-radius:var(--radius-md);background-color:var(--color-bg-tertiary);color:var(--color-text-primary);cursor:pointer;transition:all var(--transition-fast)}button:hover:not(:disabled){background-color:var(--color-surface-hover);border-color:var(--color-border-strong)}button:active:not(:disabled){background-color:var(--color-surface-active)}button:disabled{opacity:.5;cursor:not-allowed}button.primary{background-color:var(--color-accent-primary);border-color:var(--color-accent-primary);color:var(--color-bg-primary)}button.primary:hover:not(:disabled){filter:brightness(1.1)}input,select,textarea{font-family:inherit;font-size:var(--font-size-sm);padding:var(--space-sm);border:1px solid var(--color-border-default);border-radius:var(--radius-sm);background-color:var(--color-bg-tertiary);color:var(--color-text-primary);transition:border-color var(--transition-fast)}input:focus,select:focus,textarea:focus{outline:none;border-color:var(--color-accent-primary)}input::placeholder{color:var(--color-text-muted)}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--color-bg-secondary)}::-webkit-scrollbar-thumb{background:var(--color-bg-elevated);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--color-surface-hover)}.text-muted{color:var(--color-text-muted)}.text-accent{color:var(--color-accent-primary)}.text-mono{font-family:var(--font-family-mono)}.text-sm{font-size:var(--font-size-sm)}.text-xs{font-size:var(--font-size-xs)}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-between{justify-content:space-between}.gap-sm{gap:var(--space-sm)}.gap-md{gap:var(--space-md)}.image-viewer{position:relative;width:100%;height:100%;overflow:hidden;background-color:var(--color-surface-dark);cursor:grab;-webkit-user-select:none;user-select:none}.image-viewer--dragging{cursor:grabbing}.image-viewer__image-wrapper{position:absolute;top:50%;left:50%;transform-origin:center center;will-change:transform}.image-viewer__image{display:block;max-width:none;transform:translate(-50%,-50%);pointer-events:none}.image-viewer__placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:var(--space-md);color:var(--color-text-muted);text-align:center;padding:var(--space-xl)}.image-viewer__placeholder-icon{width:64px;height:64px;opacity:.3}.image-viewer__placeholder-text{font-size:var(--font-size-sm)}.image-viewer__loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:var(--space-sm);color:var(--color-text-muted);font-size:var(--font-size-sm)}.image-viewer__spinner{width:32px;height:32px;border:3px solid var(--color-border-subtle);border-top-color:var(--color-accent-primary);border-radius:50%;animation:spin 1s linear infinite}.image-viewer__error{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background-color:#e74c3c33;border:1px solid var(--color-accent-danger);border-radius:var(--radius-md);color:var(--color-accent-danger);font-size:var(--font-size-sm)}.image-viewer__metadata{position:absolute;top:var(--space-md);left:var(--space-md);display:flex;flex-direction:column;gap:var(--space-xs);pointer-events:none;z-index:10}.image-viewer__metadata-item{display:inline-block;padding:var(--space-xs) var(--space-sm);background-color:#000000b3;border-radius:var(--radius-sm);color:var(--color-text-primary);font-size:var(--font-size-xs);font-family:var(--font-family-mono);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.image-viewer__metadata-item--sol{font-size:var(--font-size-md);font-weight:var(--font-weight-semibold);color:var(--color-accent-primary)}.image-viewer__zoom-controls{position:absolute;bottom:var(--space-md);right:var(--space-md);display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs);background-color:#000000b3;border-radius:var(--radius-md);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10}.image-viewer__zoom-btn{display:flex;align-items:center;justify-content:center;width:28px;height:28px;padding:0;border:none;background-color:transparent;color:var(--color-text-primary);border-radius:var(--radius-sm);cursor:pointer;transition:background-color var(--transition-fast)}.image-viewer__zoom-btn:hover{background-color:var(--color-surface-hover)}.image-viewer__zoom-btn--reset{margin-left:var(--space-xs);border-left:1px solid var(--color-border-subtle);padding-left:var(--space-xs)}.image-viewer__zoom-level{min-width:48px;text-align:center;font-size:var(--font-size-xs);font-family:var(--font-family-mono);color:var(--color-text-secondary)}.image-viewer__instructions{position:absolute;bottom:var(--space-md);left:50%;transform:translate(-50%);padding:var(--space-xs) var(--space-sm);background-color:#00000080;border-radius:var(--radius-sm);color:var(--color-text-muted);font-size:var(--font-size-xs);pointer-events:none;opacity:.6;transition:opacity var(--transition-normal);z-index:5}.image-viewer:hover .image-viewer__instructions{opacity:1}.image-nav-component{display:flex;flex-direction:column;gap:var(--space-sm)}.image-nav-component__row{display:flex;align-items:center;justify-content:space-between;gap:var(--space-xs)}.image-nav-component__btn{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-xs);background-color:var(--color-bg-tertiary);color:var(--color-text-secondary);border:1px solid var(--color-border-subtle);border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-fast)}.image-nav-component__btn:hover:not(:disabled){background-color:var(--color-bg-hover);color:var(--color-text-primary);border-color:var(--color-border-default)}.image-nav-component__btn:disabled{opacity:.4;cursor:not-allowed}.image-nav-component__btn svg{flex-shrink:0}.image-nav-component__count{font-size:var(--font-size-sm);font-family:var(--font-family-mono);color:var(--color-text-secondary);padding:0 var(--space-xs);min-width:60px;text-align:center}.image-nav-component__sol-row{display:flex;align-items:center;gap:var(--space-sm)}.image-nav-component__label{font-size:var(--font-size-xs);color:var(--color-text-muted);white-space:nowrap}.image-nav-component__sol-select{flex:1;min-width:0;padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-xs);background-color:var(--color-bg-tertiary);color:var(--color-text-primary);border:1px solid var(--color-border-subtle);border-radius:var(--radius-sm);cursor:pointer;transition:border-color var(--transition-fast)}.image-nav-component__sol-select:hover:not(:disabled){border-color:var(--color-border-default)}.image-nav-component__sol-select:focus{outline:none;border-color:var(--color-accent-primary)}.image-nav-component__sol-select:disabled{opacity:.4;cursor:not-allowed}.image-nav-component__sol-count{font-size:var(--font-size-xs);color:var(--color-text-muted);white-space:nowrap}.roi-selector{position:absolute;inset:0;pointer-events:none;z-index:20}.roi-selector--active{pointer-events:auto;cursor:crosshair}.roi-selector--drawing{cursor:crosshair}.roi-selector__rect{position:absolute;border:2px solid var(--color-accent-primary);background-color:#ff764d26;pointer-events:none;box-sizing:border-box}.roi-selector__rect--drawing{border-style:dashed;animation:roi-dash .5s linear infinite}@keyframes roi-dash{to{stroke-dashoffset:-10}}.roi-selector__handle{position:absolute;width:8px;height:8px;background-color:var(--color-accent-primary);border:1px solid var(--color-bg-primary);border-radius:1px;pointer-events:auto;cursor:pointer}.roi-selector__handle--nw{top:-4px;left:-4px;cursor:nw-resize}.roi-selector__handle--ne{top:-4px;right:-4px;cursor:ne-resize}.roi-selector__handle--sw{bottom:-4px;left:-4px;cursor:sw-resize}.roi-selector__handle--se{bottom:-4px;right:-4px;cursor:se-resize}.roi-selector__info{position:absolute;top:var(--space-md);right:var(--space-md);display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-xs) var(--space-sm);background-color:#000c;border:1px solid var(--color-accent-primary);border-radius:var(--radius-sm);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);pointer-events:auto;z-index:25}.roi-selector__info-text{color:var(--color-accent-primary);font-size:var(--font-size-sm);font-family:var(--font-family-mono);font-weight:var(--font-weight-medium)}.roi-selector__info-coords{color:var(--color-text-muted);font-size:var(--font-size-xs);font-family:var(--font-family-mono)}.roi-selector__clear-btn{display:flex;align-items:center;justify-content:center;width:20px;height:20px;padding:0;margin-left:var(--space-xs);border:none;background-color:transparent;color:var(--color-text-muted);border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-fast)}.roi-selector__clear-btn:hover{background-color:var(--color-surface-hover);color:var(--color-accent-danger)}.roi-selector__hint{position:absolute;bottom:60px;left:50%;transform:translate(-50%);padding:var(--space-sm) var(--space-md);background-color:#000000b3;border:1px solid var(--color-border-subtle);border-radius:var(--radius-md);color:var(--color-text-secondary);font-size:var(--font-size-sm);pointer-events:none;animation:hint-pulse 2s ease-in-out infinite}@keyframes hint-pulse{0%,to{opacity:.7}50%{opacity:1}}.segment-overlay{position:absolute;top:0;left:0;transform:translate(-50%,-50%);pointer-events:none;overflow:visible}.segment-overlay__segment-group{pointer-events:auto;cursor:pointer;transition:filter .15s ease}.segment-overlay__segment-group:hover{filter:brightness(1.2)}.segment-overlay__path{fill:none;stroke-linejoin:round;stroke-linecap:round;transition:fill-opacity .15s ease}.segment-overlay__path--filled,.segment-overlay__path--selected{fill:var(--segment-color)}.segment-overlay__rect{fill:none;pointer-events:auto;cursor:pointer;transition:fill-opacity .15s ease}.segment-overlay__rect--filled,.segment-overlay__rect--selected{fill:var(--segment-color)}.segment-overlay__label-svg{font-weight:600;text-anchor:middle;dominant-baseline:middle;pointer-events:none;text-shadow:0 1px 2px rgba(0,0,0,.8)}@media(prefers-reduced-motion:reduce){.segment-overlay__segment-group,.segment-overlay__path,.segment-overlay__rect{transition:none}}.parameter-knob{display:flex;flex-direction:column;align-items:center;gap:var(--space-xs);-webkit-user-select:none;user-select:none}.parameter-knob--disabled{opacity:.5;pointer-events:none}.parameter-knob__label{font-size:var(--font-size-xs);font-weight:var(--font-weight-medium);color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.5px;text-align:center;line-height:1.2;max-width:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.parameter-knob__control{position:relative;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-full);transition:transform var(--transition-fast)}.parameter-knob__control:focus{outline:none}.parameter-knob__control:focus-visible{box-shadow:0 0 0 2px var(--color-accent-primary)}.parameter-knob__control:hover:not(:active){transform:scale(1.02)}.parameter-knob--dragging .parameter-knob__control{transform:scale(1.05)}.parameter-knob__svg{display:block}.parameter-knob__bg{fill:var(--color-knob-bg);stroke:var(--color-border-default);stroke-width:1}.parameter-knob__control:hover .parameter-knob__bg{stroke:var(--color-border-strong)}.parameter-knob__control:focus-visible .parameter-knob__bg{stroke:var(--color-accent-primary)}.parameter-knob__track{stroke:var(--color-knob-ring)}.parameter-knob__value-arc{stroke:var(--color-knob-indicator);transition:stroke var(--transition-fast)}.parameter-knob--dragging .parameter-knob__value-arc{stroke:var(--color-accent-primary);filter:brightness(1.2)}.parameter-knob__indicator{stroke:var(--color-text-primary);transition:stroke var(--transition-fast)}.parameter-knob--dragging .parameter-knob__indicator{stroke:var(--color-accent-primary)}.parameter-knob__center{fill:var(--color-bg-tertiary)}.parameter-knob__value{display:flex;align-items:baseline;gap:2px;font-family:var(--font-family-mono);font-size:var(--font-size-sm);color:var(--color-text-primary);min-width:48px;justify-content:center}.parameter-knob__value-text{font-weight:var(--font-weight-medium)}.parameter-knob__unit{font-size:var(--font-size-xs);color:var(--color-text-muted)}.parameter-knob__fine-mode{position:absolute;bottom:-4px;left:50%;transform:translate(-50%);font-size:var(--font-size-xs);color:var(--color-accent-secondary);background:var(--color-bg-primary);padding:1px 4px;border-radius:var(--radius-sm);font-weight:var(--font-weight-medium);text-transform:uppercase;letter-spacing:.5px}@media(max-width:480px){.parameter-knob__label{font-size:10px;max-width:60px}.parameter-knob__value{font-size:11px;min-width:40px}}.parameter-knob-group{display:flex;flex-wrap:wrap;gap:var(--space-md);justify-content:center}.parameter-knob-group--compact{gap:var(--space-sm)}.parameter-knob-row{display:flex;flex-direction:row;gap:var(--space-md);align-items:flex-start}.engine-params{display:grid;gap:var(--space-md);padding:var(--space-xs) 0}.engine-params--2col,.engine-params--4col{grid-template-columns:repeat(2,1fr);justify-items:center}.engine-params--2col .parameter-knob:only-child{grid-column:1 / -1}@media(max-width:280px){.engine-params--4col,.engine-params--2col{grid-template-columns:1fr}}.engine-params__badge{display:inline-flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-xs);color:var(--color-text-muted);background-color:var(--color-bg-tertiary);border-radius:var(--radius-sm);margin-bottom:var(--space-sm)}.engine-params__badge-dot{width:6px;height:6px;border-radius:50%;background-color:var(--color-accent-success)}.engine-params--loading{opacity:.5;pointer-events:none}.engine-params__empty{text-align:center;color:var(--color-text-muted);font-size:var(--font-size-sm);padding:var(--space-md)}.engine-selector-dropdown{position:relative;width:100%}.engine-selector-dropdown--disabled{opacity:.5;pointer-events:none}.engine-selector-dropdown__trigger{display:flex;align-items:center;justify-content:space-between;width:100%;padding:var(--space-sm) var(--space-md);background-color:var(--color-bg-tertiary);border:1px solid var(--color-border-default);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}.engine-selector-dropdown__trigger:hover:not(:disabled){border-color:var(--color-border-active);background-color:var(--color-surface-hover)}.engine-selector-dropdown--open .engine-selector-dropdown__trigger{border-color:var(--color-accent-primary);background-color:var(--color-surface-active)}.engine-selector-dropdown__trigger:focus{outline:none;border-color:var(--color-accent-primary);box-shadow:0 0 0 2px #ff764d33}.engine-selector-dropdown__selected{display:flex;align-items:center;gap:var(--space-sm)}.engine-selector-dropdown__name{font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-primary)}.engine-selector-dropdown__chevron{width:16px;height:16px;color:var(--color-text-muted);transition:transform var(--transition-fast)}.engine-selector-dropdown--open .engine-selector-dropdown__chevron{transform:rotate(180deg)}.engine-selector-dropdown__speed{font-size:var(--font-size-xs);font-family:var(--font-family-mono);padding:2px 6px;border-radius:var(--radius-sm);font-weight:var(--font-weight-medium)}.engine-selector-dropdown__speed--fast{background-color:#64c86426;color:#6bcc6b}.engine-selector-dropdown__speed--medium{background-color:#ffc86426;color:#fc6}.engine-selector-dropdown__speed--slow{background-color:#ff764d26;color:var(--color-accent-primary)}.engine-selector-dropdown__menu{position:absolute;top:calc(100% + 4px);left:0;right:0;z-index:100;margin:0;padding:var(--space-xs);background-color:var(--color-bg-secondary);border:1px solid var(--color-border-active);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);list-style:none;max-height:280px;overflow-y:auto}.engine-selector-dropdown__option{display:flex;flex-direction:column;gap:2px;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-sm);cursor:pointer;transition:background-color var(--transition-fast)}.engine-selector-dropdown__option:hover{background-color:var(--color-surface-hover)}.engine-selector-dropdown__option--selected{background-color:#ff764d1a}.engine-selector-dropdown__option--selected:hover{background-color:#ff764d26}.engine-selector-dropdown__option-main{display:flex;align-items:center;justify-content:space-between;gap:var(--space-sm)}.engine-selector-dropdown__option-name{font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-primary)}.engine-selector-dropdown__option--selected .engine-selector-dropdown__option-name{color:var(--color-accent-primary)}.engine-selector-dropdown__option-desc{font-size:var(--font-size-xs);color:var(--color-text-muted)}.segment-stats-panel{display:flex;flex-direction:column;gap:var(--space-sm);padding:var(--space-xs) 0}.segment-stats-panel--empty{color:var(--color-text-muted);font-size:var(--font-size-sm);font-style:italic;padding:var(--space-sm) 0}.segment-stats-panel__scale{display:flex;align-items:center;justify-content:center;padding:var(--space-xs) 0}.segment-stats-panel__scale-label{display:flex;align-items:center;gap:var(--space-xs);font-size:var(--font-size-sm);color:var(--color-text-secondary)}.segment-stats-panel__scale-input{width:60px;padding:2px 4px;font-size:var(--font-size-sm);font-family:var(--font-mono);text-align:right;background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);color:var(--color-text-primary)}.segment-stats-panel__scale-input:focus{outline:none;border-color:var(--color-accent-primary)}.segment-stats-panel__unit-toggle{display:flex;justify-content:center;gap:var(--space-xs);padding:var(--space-xs) 0}.segment-stats-panel__unit-btn{padding:4px 12px;font-size:var(--font-size-sm);font-weight:500;background:var(--color-bg-tertiary);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);color:var(--color-text-secondary);cursor:pointer;transition:all var(--transition-fast)}.segment-stats-panel__unit-btn:hover{background:var(--color-bg-secondary);border-color:var(--color-accent-primary)}.segment-stats-panel__unit-btn--active{background:var(--color-accent-primary);border-color:var(--color-accent-primary);color:#fff}.segment-stats-panel__phi-ref-btn{padding:4px 8px;font-size:var(--font-size-xs);font-weight:600;background:var(--color-bg-tertiary);border:1px solid var(--color-border);border-radius:50%;color:var(--color-text-muted);cursor:pointer;transition:all var(--transition-fast)}.segment-stats-panel__phi-ref-btn:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.segment-stats-panel__phi-reference{background:var(--color-bg-tertiary);border-radius:var(--border-radius-sm);padding:var(--space-sm);margin:var(--space-xs) 0}.segment-stats-panel__phi-reference-title{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text-primary);text-align:center;margin-bottom:var(--space-xs)}.segment-stats-panel__phi-reference-formula{font-size:var(--font-size-xs);font-family:var(--font-mono);color:var(--color-text-muted);text-align:center;margin-bottom:var(--space-sm)}.segment-stats-panel__phi-table{width:100%;font-size:var(--font-size-xs);border-collapse:collapse}.segment-stats-panel__phi-table th,.segment-stats-panel__phi-table td{padding:2px 4px;text-align:center;border-bottom:1px solid var(--color-border)}.segment-stats-panel__phi-table th{font-weight:600;color:var(--color-text-secondary)}.segment-stats-panel__phi-table td{color:var(--color-text-muted);font-family:var(--font-mono)}.segment-stats-panel__phi-table td:last-child{font-family:inherit;text-align:left}.segment-stats-panel__summary{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--space-xs)}.segment-stats-panel__stat{display:flex;flex-direction:column;align-items:center;padding:var(--space-xs);background:var(--color-bg-tertiary);border-radius:var(--border-radius-sm)}.segment-stats-panel__stat-label{font-size:var(--font-size-xs);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:.05em}.segment-stats-panel__stat-value{font-size:var(--font-size-base);font-weight:600;color:var(--color-text-primary);font-variant-numeric:tabular-nums}.segment-stats-panel__range{font-size:var(--font-size-sm);color:var(--color-text-muted);text-align:center;padding:var(--space-xs) 0}.segment-stats-panel__histogram{background:var(--color-bg-tertiary);border-radius:var(--border-radius-sm);padding:var(--space-sm)}.segment-stats-panel__histogram-label{font-size:var(--font-size-xs);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:.05em;margin-bottom:var(--space-xs);text-align:center}.segment-stats-panel__histogram-svg{width:100%;height:auto;max-height:80px}.segment-stats-panel__histogram-bar{fill:var(--color-accent-primary);opacity:.8;transition:opacity var(--transition-fast)}.segment-stats-panel__histogram-bar:hover{opacity:1}.segment-stats-panel__axis{stroke:var(--color-border);stroke-width:1}.segment-stats-panel__axis-label{font-size:9px;fill:var(--color-text-muted);font-family:var(--font-mono)}.preset-manager{display:flex;flex-direction:column;gap:var(--space-xs)}.preset-manager__controls{display:flex;gap:var(--space-xs)}.preset-manager__select{flex:1;padding:var(--space-xs) var(--space-sm);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);color:var(--color-text-primary);font-size:var(--font-size-sm);cursor:pointer;min-width:0}.preset-manager__select:hover:not(:disabled){border-color:var(--color-border-hover)}.preset-manager__select:focus{outline:none;border-color:var(--color-accent-primary)}.preset-manager__select:disabled{opacity:.5;cursor:not-allowed}.preset-manager__select optgroup{color:var(--color-text-secondary);font-weight:600;background:var(--color-bg-tertiary)}.preset-manager__select option{color:var(--color-text-primary);background:var(--color-bg-secondary);padding:var(--space-xs)}.preset-manager__btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;padding:0;border:1px solid var(--color-border);border-radius:var(--radius-sm);background:var(--color-bg-secondary);color:var(--color-text-secondary);cursor:pointer;transition:all var(--transition-fast)}.preset-manager__btn:hover:not(:disabled){border-color:var(--color-border-hover);color:var(--color-text-primary)}.preset-manager__btn--save:hover:not(:disabled){border-color:var(--color-accent-primary);color:var(--color-accent-primary)}.preset-manager__btn--delete:hover:not(:disabled){border-color:var(--color-error);color:var(--color-error)}.preset-manager__btn:disabled{opacity:.3;cursor:not-allowed}.preset-manager__btn svg{flex-shrink:0}.preset-manager__dialog-overlay{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .15s ease-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.preset-manager__dialog{background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md);width:280px;max-width:90vw;animation:slideUp .15s ease-out}@keyframes slideUp{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}.preset-manager__dialog-header{font-size:var(--font-size-md);font-weight:600;color:var(--color-text-primary);margin-bottom:var(--space-sm)}.preset-manager__dialog-input{width:100%;padding:var(--space-sm);background:var(--color-bg-tertiary);border:1px solid var(--color-border);border-radius:var(--radius-sm);color:var(--color-text-primary);font-size:var(--font-size-sm);margin-bottom:var(--space-xs)}.preset-manager__dialog-input:focus{outline:none;border-color:var(--color-accent-primary)}.preset-manager__dialog-input::placeholder{color:var(--color-text-tertiary)}.preset-manager__dialog-info{font-size:var(--font-size-xs);color:var(--color-text-tertiary);margin-bottom:var(--space-md)}.preset-manager__dialog-actions{display:flex;gap:var(--space-sm);justify-content:flex-end}.preset-manager__dialog-btn{padding:var(--space-xs) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-sm);font-size:var(--font-size-sm);cursor:pointer;transition:all var(--transition-fast)}.preset-manager__dialog-btn--cancel{background:var(--color-bg-tertiary);color:var(--color-text-secondary)}.preset-manager__dialog-btn--cancel:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.preset-manager__dialog-btn--save{background:var(--color-accent-primary);border-color:var(--color-accent-primary);color:#fff}.preset-manager__dialog-btn--save:hover:not(:disabled){background:var(--color-accent-hover);border-color:var(--color-accent-hover)}.preset-manager__dialog-btn--save:disabled{opacity:.5;cursor:not-allowed}.grain-selector{position:absolute;inset:0;pointer-events:auto;cursor:crosshair;z-index:25}.grain-selector--loading{cursor:wait}.grain-selector__point{position:absolute;width:20px;height:20px;border-radius:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;color:#fff;pointer-events:none;box-shadow:0 2px 8px #0006;animation:point-appear .2s ease-out}.grain-selector__point--foreground{background-color:var(--color-accent-success, #22c55e);border:2px solid white}.grain-selector__point--background{background-color:var(--color-accent-danger, #ef4444);border:2px solid white}@keyframes point-appear{0%{transform:translate(-50%,-50%) scale(0);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}.grain-selector__status{position:absolute;top:var(--space-md, 12px);left:50%;transform:translate(-50%);display:flex;align-items:center;gap:var(--space-sm, 8px);padding:var(--space-sm, 8px) var(--space-md, 12px);background-color:#000000d9;border:1px solid var(--color-border, #333);border-radius:var(--radius-md, 6px);pointer-events:auto;z-index:30}.grain-selector__status-text{display:flex;align-items:center;gap:var(--space-xs, 4px);color:var(--color-text-primary, #fff);font-size:var(--font-size-sm, 13px)}.grain-selector__spinner{width:14px;height:14px;border:2px solid var(--color-border, #333);border-top-color:var(--color-accent-primary, #ff764d);border-radius:50%;animation:spin .8s linear infinite}.grain-selector__error{color:var(--color-accent-danger, #ef4444)}.grain-selector__clear-btn{padding:4px 8px;font-size:11px;background:transparent;border:1px solid var(--color-border, #444);border-radius:4px;color:var(--color-text-secondary, #aaa);cursor:pointer;transition:all .15s ease}.grain-selector__clear-btn:hover{background:var(--color-surface-hover, #333);color:var(--color-text-primary, #fff)}.grain-selector__instructions{position:absolute;bottom:60px;left:50%;transform:translate(-50%);display:flex;gap:var(--space-md, 12px);padding:var(--space-xs, 4px) var(--space-sm, 8px);background-color:#000000b3;border-radius:var(--radius-sm, 4px);font-size:var(--font-size-xs, 11px);color:var(--color-text-muted, #888);pointer-events:none}.grain-selector__instructions span{white-space:nowrap}.app{display:flex;flex-direction:column;height:100vh;width:100%}.header{display:flex;align-items:center;justify-content:space-between;height:var(--header-height);padding:0 var(--space-md);background-color:var(--color-bg-secondary);border-bottom:1px solid var(--color-border-subtle)}.header__title{display:flex;align-items:center;gap:var(--space-sm);font-size:var(--font-size-md);font-weight:var(--font-weight-semibold);color:var(--color-text-primary)}.header__title-icon{width:20px;height:20px;color:var(--color-accent-primary)}.header__actions{display:flex;gap:var(--space-sm)}.export-format-select{padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-sm);background-color:var(--color-bg-tertiary);color:var(--color-text-primary);border:1px solid var(--color-border-subtle);border-radius:var(--radius-sm);cursor:pointer}.export-format-select:hover:not(:disabled){border-color:var(--color-border-strong)}.export-format-select:disabled{opacity:.5;cursor:not-allowed}.main{display:flex;flex:1;overflow:hidden}.sidebar{display:flex;flex-direction:column;width:var(--sidebar-width);background-color:var(--color-bg-secondary);border-right:1px solid var(--color-border-subtle);overflow-y:auto}.sidebar__section{padding:var(--panel-padding);border-bottom:1px solid var(--color-border-subtle)}.sidebar__section:last-child{border-bottom:none}.sidebar__section-title{font-size:var(--font-size-xs);font-weight:var(--font-weight-semibold);text-transform:uppercase;letter-spacing:.5px;color:var(--color-text-muted);margin-bottom:var(--space-sm)}.canvas-area{flex:1;display:flex;flex-direction:column;background-color:var(--color-surface-dark);overflow:hidden}.canvas-container{flex:1;display:flex;align-items:center;justify-content:center;position:relative}.canvas-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-md);color:var(--color-text-muted);text-align:center;padding:var(--space-xl)}.canvas-placeholder__icon{width:64px;height:64px;opacity:.3}.canvas-placeholder__text{font-size:var(--font-size-sm)}.status-bar{display:flex;align-items:center;justify-content:space-between;padding:var(--space-xs) var(--space-md);background-color:var(--color-bg-tertiary);border-top:1px solid var(--color-border-subtle);font-size:var(--font-size-xs);color:var(--color-text-muted)}.status-bar__left,.status-bar__right{display:flex;gap:var(--space-md)}.status-bar__item{display:flex;align-items:center;gap:var(--space-xs)}.status-bar__indicator{width:6px;height:6px;border-radius:var(--radius-full);background-color:var(--color-accent-success)}.status-bar__indicator--disconnected{background-color:var(--color-accent-danger)}.panel{background-color:var(--color-bg-tertiary);border-radius:var(--radius-md);padding:var(--space-md)}.panel--dark{background-color:var(--color-surface-dark)}.image-nav{display:flex;align-items:center;gap:var(--space-xs)}.image-nav button{padding:var(--space-xs) var(--space-sm);font-size:var(--font-size-xs)}.image-nav__count{font-size:var(--font-size-sm);color:var(--color-text-secondary);padding:0 var(--space-sm)}.engine-selector{display:flex;flex-direction:column;gap:var(--space-sm)}.engine-selector select{width:100%}.parameter-controls{display:flex;flex-direction:column;gap:var(--space-md)}.parameter-row{display:flex;align-items:center;justify-content:space-between}.parameter-label{font-size:var(--font-size-sm);color:var(--color-text-secondary)}.parameter-value{font-size:var(--font-size-sm);font-family:var(--font-family-mono);color:var(--color-text-primary)}.image-info{margin-top:var(--space-sm)}.image-info__filename{font-size:var(--font-size-xs);font-family:var(--font-family-mono);color:var(--color-text-muted);word-break:break-all}.canvas-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:var(--space-md);color:var(--color-text-muted)}.canvas-loading__spinner{width:40px;height:40px;border:3px solid var(--color-border-subtle);border-top-color:var(--color-accent-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.canvas-error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:var(--space-md);color:var(--color-text-muted);text-align:center;padding:var(--space-xl)}.canvas-error svg{color:var(--color-accent-danger);opacity:.6}.canvas-error p{max-width:400px}.canvas-viewer-wrapper{position:relative;width:100%;height:100%}.roi-toggle-btn{background-color:var(--color-surface-hover);border:1px solid var(--color-border-default);color:var(--color-text-primary);padding:var(--space-sm) var(--space-md);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}.roi-toggle-btn:hover:not(:disabled){background-color:var(--color-surface-active);border-color:var(--color-accent-primary)}.roi-toggle-btn--active{background-color:#ff764d33;border-color:var(--color-accent-primary);color:var(--color-accent-primary)}.roi-toggle-btn:disabled{opacity:.5;cursor:not-allowed}.roi-display{display:flex;align-items:center;justify-content:space-between;padding:var(--space-xs) var(--space-sm);margin-bottom:var(--space-sm);background-color:var(--color-bg-tertiary);border-radius:var(--radius-sm);border:1px solid var(--color-border-subtle)}.roi-display__label{font-size:var(--font-size-xs);color:var(--color-text-muted)}.roi-display__value{font-size:var(--font-size-sm);font-family:var(--font-family-mono);color:var(--color-accent-primary)}.status-bar__item--roi{color:var(--color-accent-primary);font-weight:var(--font-weight-medium)}.sidebar-toggle{display:none;padding:var(--space-xs) var(--space-sm);background-color:transparent;border:none;color:var(--color-text-secondary);cursor:pointer}.sidebar-toggle:hover{color:var(--color-text-primary);background-color:transparent}.sidebar-toggle svg{width:20px;height:20px}.sidebar-overlay{display:none;position:fixed;inset:0;background-color:#00000080;z-index:90}@media(max-width:768px){.sidebar-toggle{display:flex;align-items:center;justify-content:center}.sidebar{position:fixed;left:0;top:var(--header-height);bottom:0;z-index:100;transform:translate(-100%);transition:transform var(--transition-normal);box-shadow:var(--shadow-lg)}.sidebar--open{transform:translate(0)}.sidebar-overlay--visible{display:block}.status-bar{flex-wrap:wrap;gap:var(--space-sm);padding:var(--space-sm) var(--space-md)}.status-bar__left,.status-bar__right{gap:var(--space-sm)}}@media(max-width:480px){.header__title span{font-size:var(--font-size-sm)}.status-bar__item:not(.status-bar__item--roi):not(:first-child){display:none}.status-bar__left .status-bar__item:first-child,.status-bar__right .status-bar__item:last-child{display:flex}}.segmentation-status{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm);margin-top:var(--space-sm);border-radius:var(--radius-sm);font-size:var(--font-size-sm)}.segmentation-status--loading{background-color:#ff764d1a;color:var(--color-accent-primary);border:1px solid rgba(255,118,77,.3)}.segmentation-status__spinner{width:14px;height:14px;border:2px solid var(--color-border-subtle);border-top-color:var(--color-accent-primary);border-radius:50%;animation:spin 1s linear infinite}.segmentation-status--error{background-color:#ff64641a;color:var(--color-accent-danger);border:1px solid rgba(255,100,100,.3)}.segmentation-results{margin-top:var(--space-sm);padding:var(--space-sm);background-color:var(--color-bg-tertiary);border-radius:var(--radius-sm);border:1px solid var(--color-border-subtle)}.segmentation-results__row{display:flex;justify-content:space-between;align-items:center;padding:var(--space-xs) 0}.segmentation-results__row:not(:last-child){border-bottom:1px solid var(--color-border-subtle)}.segmentation-results__label{font-size:var(--font-size-xs);color:var(--color-text-muted)}.segmentation-results__value{font-size:var(--font-size-sm);font-family:var(--font-family-mono);color:var(--color-accent-primary)}.segmentation-results__divider{height:1px;background-color:var(--color-border-subtle);margin:var(--space-sm) 0}.segmentation-results__toggle{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:var(--font-size-sm);color:var(--color-text-secondary);cursor:pointer}.segmentation-results__toggle input[type=checkbox]{width:14px;height:14px;accent-color:var(--color-accent-primary);cursor:pointer}.segmentation-results__toggle:hover{color:var(--color-text-primary)}.selected-segment-info{margin-top:var(--space-sm);padding:var(--space-sm);background-color:var(--color-bg-secondary);border:1px solid var(--color-accent-primary);border-radius:var(--radius-sm)}.selected-segment-info__header{display:flex;justify-content:space-between;align-items:center;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-accent-primary);margin-bottom:var(--space-xs)}.selected-segment-info__clear{width:20px;height:20px;padding:0;background:transparent;border:1px solid var(--color-border-subtle);border-radius:var(--radius-full);color:var(--color-text-muted);font-size:14px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center}.selected-segment-info__clear:hover{border-color:var(--color-accent-primary);color:var(--color-accent-primary)}.selected-segment-info__details{display:flex;flex-direction:column;gap:var(--space-xs)}.selected-segment-info__row{display:flex;justify-content:space-between;font-size:var(--font-size-xs)}.selected-segment-info__row span:first-child{color:var(--color-text-muted)}.selected-segment-info__row span:last-child{font-family:var(--font-family-mono);color:var(--color-text-secondary)}.sidebar__section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-sm)}.sidebar__section-header .sidebar__section-title{margin-bottom:0}.live-mode-controls{display:flex;align-items:center;gap:var(--space-xs)}.live-mode-toggle{display:flex;align-items:center;gap:4px;padding:2px 8px;font-size:var(--font-size-xs);font-weight:var(--font-weight-medium);background-color:var(--color-surface-hover);border:1px solid var(--color-border-default);border-radius:var(--radius-sm);color:var(--color-text-muted);cursor:pointer;transition:all var(--transition-fast)}.live-mode-toggle:hover{border-color:var(--color-text-muted);color:var(--color-text-secondary)}.live-mode-indicator{width:6px;height:6px;border-radius:50%;background-color:var(--color-text-muted);transition:background-color var(--transition-fast)}.live-mode-toggle--active{border-color:var(--color-accent-danger);color:var(--color-text-primary)}.live-mode-toggle--active .live-mode-indicator{background-color:var(--color-accent-danger);box-shadow:0 0 4px var(--color-accent-danger)}.recalculate-btn{display:flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;font-size:14px;background-color:var(--color-surface-hover);border:1px solid var(--color-border-default);border-radius:var(--radius-sm);color:var(--color-text-muted);cursor:pointer;transition:all var(--transition-fast)}.recalculate-btn:hover:not(:disabled){border-color:var(--color-accent-primary);color:var(--color-accent-primary)}.recalculate-btn:disabled{opacity:.4;cursor:not-allowed}.recalculate-btn--pending{border-color:var(--color-accent-warning);color:var(--color-accent-warning);animation:pending-pulse 1.5s ease-in-out infinite}@keyframes pending-pulse{0%,to{opacity:1}50%{opacity:.6}}.pending-params-indicator{display:flex;align-items:center;padding:var(--space-xs) var(--space-sm);margin-bottom:var(--space-sm);background-color:#ffc10726;border:1px solid rgba(255,193,7,.4);border-radius:var(--radius-sm);font-size:var(--font-size-xs);color:#ffc107}.import-btn{display:flex;align-items:center;justify-content:center;width:100%;padding:var(--space-xs) var(--space-sm);margin-top:var(--space-sm);background-color:var(--color-surface-hover);border:1px solid var(--color-border-default);border-radius:var(--radius-md);color:var(--color-text-secondary);font-size:var(--font-size-sm);cursor:pointer;transition:all var(--transition-fast)}.import-btn:hover{border-color:var(--color-accent-primary);color:var(--color-accent-primary);background-color:#6366f11a}.overlay-control-row{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-xs) 0}.overlay-control-row__toggle{display:flex;align-items:center;gap:var(--space-xs);font-size:var(--font-size-sm);color:var(--color-text-secondary);cursor:pointer;white-space:nowrap;flex-shrink:0}.overlay-control-row__toggle input[type=checkbox]{width:14px;height:14px;accent-color:var(--color-accent-primary);cursor:pointer}.overlay-control-row__toggle:hover{color:var(--color-text-primary)}.overlay-control-row__slider-wrap{display:flex;align-items:center;gap:var(--space-xs);flex:1;min-width:0}.overlay-control-row__value{font-size:var(--font-size-xs);font-family:var(--font-family-mono);color:var(--color-text-muted);min-width:28px;text-align:right;flex-shrink:0}.overlay-opacity-control__slider{width:100%;height:4px;-webkit-appearance:none;appearance:none;background:var(--color-border-subtle);border-radius:2px;outline:none;cursor:pointer}.overlay-opacity-control__slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;border-radius:50%;background:var(--color-text-secondary);cursor:pointer;border:2px solid var(--color-bg-secondary);box-shadow:0 0 3px #0000004d}.overlay-opacity-control__slider::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:var(--color-text-secondary);cursor:pointer;border:2px solid var(--color-bg-secondary);box-shadow:0 0 3px #0000004d}.overlay-opacity-control__slider::-webkit-slider-runnable-track{height:4px;border-radius:2px;background:var(--color-border-subtle)}.overlay-opacity-control__slider::-moz-range-track{height:4px;border-radius:2px;background:var(--color-border-subtle)}.overlay-opacity-control__slider::-moz-range-progress{height:4px;border-radius:2px;background:var(--color-text-muted)}
